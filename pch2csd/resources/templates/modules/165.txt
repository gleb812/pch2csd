;@ ins a a a a a a
;@ outs a a a a a a a

; TODO check
opcode DXRouter,0,
  kAlg,kF, ki1,ki2,ki3,ki4,ki5,ki6, ko1,ko2,ko3,ko4,ko5,ko6,kmaino xin
  a1 zar ki1
  a2 zar ki2
  a3 zar ki3
  a4 zar ki4
  a5 zar ki5
  a6 zar ki6

iF[] init 8
iF fillarray 0,0.001216,0.003162,0.006383,0.0106,0.01996,0.03428,0.04417
i1[][] init 32,4
i1 fillarray  1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0,
1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 1,1,0,1,
1,1,0,1, 1,1,1,0, 1,0,0,0, 0,1,0,0, 0,1,0,0, 1,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0,
0,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0
i2[][] init 32,2
i2 fillarray 0,0, 1,0, 0,1, 0,1, 0,0, 0,0, 0,0, 0,0, 1,0, 0,1, 0,1, 1,0, 0,0,
0,0, 1,0, 0,0, 1,0, 0,0, 0,1, 0,1, 0,1, 0,0, 0,1, 0,0, 0,0, 0,1, 0,1, 0,0, 0,0,
0,0, 0,0, 0,0
i3[][] init 32,4
i3 fillarray 0,1,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0, 0,1,0,0, 0,1,0,0, 0,1,1,0,
0,1,1,0, 0,1,1,0, 1,0,0,0, 0,0,0,0, 0,1,1,1, 0,1,1,1, 0,1,0,0, 0,1,0,0, 0,1,0,0,
0,1,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0, 1,0,0,0, 0,0,0,1, 0,0,0,0, 0,0,0,1, 0,0,0,0,
0,0,0,0, 1,0,0,0, 0,1,0,0, 0,1,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0
i4[][] init 32,3
i4 fillarray 0,1,0, 0,1,0, 0,1,0, 0,1,0, 0,0,0, 0,0,0, 0,0,0, 1,0,0, 0,0,0,
0,1,1, 0,1,1, 0,0,0, 0,0,0, 0,1,1, 0,1,1, 0,0,0, 0,0,0, 0,1,0, 0,0,1, 0,1,1,
0,0,1, 0,0,1, 0,0,1, 0,0,1, 0,0,1, 0,1,1, 0,1,1, 0,1,0, 0,0,0, 0,0,0
i5[][] init 32,2
i5 fillarray 0,1, 0,1, 0,1, 0,1, 0,1, 0,1, 0,1, 0,1, 0,1, 0,0, 0,0, 0,0, 0,0,
0,0, 0,0, 0,1, 0,1, 0,1, 0,1, 0,0, 0,1, 0,1, 0,1, 0,1, 0,1, 0,0, 0,0, 1,0, 0,1,
1,0, 0,1, 0,0
i6[][] init 32,3
i6 fillarray 0,0,1, 0,0,0, 0,0,1, 1,0,0, 0,0,1, 0,1,0, 0,0,1, 0,0,0, 0,0,0,
0,0,0, 0,0,1, 0,0,0, 0,0,1, 0,0,1, 0,0,0, 0,0,1, 0,0,0, 0,0,0, 0,0,1, 0,0,0,
0,0,0, 0,0,1, 0,0,1, 0,0,1, 0,0,1, 0,0,1, 0,0,0, 0,0,0, 0,0,1, 0,0,0, 0,0,1,
0,0,1
iM[][] init 32,6
iM fillarray 1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,0,1,0,0, 1,0,0,1,0,0, 1,0,1,0,1,0,
1,0,1,0,1,0, 1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,0,1,0,0, 1,0,0,1,0,0,
1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,1,0,0,0, 1,0,0,0,0,0, 1,0,0,0,0,0,
1,0,0,0,0,0, 1,0,0,1,1,0, 1,1,0,1,0,0, 1,1,0,1,1,0, 1,0,1,1,1,0, 1,1,0,1,1,0,
1,1,1,1,1,0, 1,1,1,1,1,0, 1,1,0,1,0,0, 1,1,0,1,0,0, 1,0,1,0,0,1, 1,1,1,0,1,0,
1,1,1,0,0,1, 1,1,1,1,1,0, 1,1,1,1,1,1

a1i = a2*i1[kAlg][0] + a3*i1[kAlg][1] + a4*i1[kAlg][2] + a5*i1[kAlg][3]
a2i = a2*i2[kAlg][0]*iF[kF] + a3*i2[kAlg][1]
a3i = a3*i3[kAlg][0]*iF[kF] + a4*i3[kAlg][1] + a5*i3[kAlg][2] + a6*i3[kAlg][3]
a4i = a4*i4[kAlg][0]*iF[kF] + a5*i4[kAlg][1] + a6*i4[kAlg][2]
a5i = a5*i5[kAlg][0]*iF[kF] + a6*i5[kAlg][1]
a6i = a4*i6[kAlg][0] + a5*i6[kAlg][1] + a6*i6[kAlg][2]*iF[kF]
aMain = a1*iM[kAlg][0] +a2*iM[kAlg][1] +a3*iM[kAlg][2] +a4*iM[kAlg][3] +a5*iM[kAlg][4] +a6*iM[kAlg][5]

zaw aMain,kmaino
zaw a1i,ko1
zaw a2i,ko2
zaw a3i,ko3
zaw a4i,ko4
zaw a5i,ko5
zaw a6i,ko6
endop
